<!DOCTYPE html>
<html>
<head>
    <title>Wi-Fi</title>
    <meta charset="utf-8">
    <meta name="viewport" content="height = device-height,width = device-width,target-densitydpi = medium-dpi "/>
    <link href="../resoureces/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="./wechat.css" rel="stylesheet" type="text/css">
    <link href="../resoureces/css/ripples.min.css" rel="stylesheet">
    <link href="../resoureces/css/material-wfont.min.css" rel="stylesheet">
    <link href="../resoureces/css/Rainbow.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../resoureces/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../resoureces/js/ripples.min.js"></script>
    <script type="text/javascript" src="../resoureces/js/material.min.js"></script>
</head>
<body>
<div class="container-fluid">
    <div class='row text-center div_pc_show'>
        <div class='text-center col-lg-offset-6 col-lg-3 col-md-offset-6 col-md-3'>
            <img class='img_pc_show' src='./logo.png'>
        </div>
    </div>
    <div class='row all_title_div' style=''>
        <div style='' class='col-lg-offset-6 col-lg-3 text-center'>
            <h4>自由无线，快乐分享</h4>
        </div>
    </div>
    <div id="form_wrapper">
        <form id="sms_form" role="form" class="no_border_radius row_min_width bg_color_pc_show col-lg-offset-6 col-lg-3 col-sm-offset-5 col-sm-5">
            <div class="row row_min_width"><p class="col-lg-15 p_error_line" id="error_line" ></p></div>
            <div class="row row_min_width"><label for="rainbow_user_name_number"
                                                  class="col-lg-15 control-label">用户名</label></div>
            <div class="row row_pc_show row_min_width">
                <div class="col-lg-15"><input type="text" id="rainbow_user_name_number" autocomplete="false"
                                              class="col-lg-15 form-control input_pc_show" placeholder="请输入用户名"
                                              lang="{placeholder:enter_mobile_number}"></div>
            </div>
            <div class="row row_min_width">
                <div class="col-lg-15"><span id="rainbow_phone_number_error" class="" role="alert"></span></div>
            </div>
            <div class="row row_min_width"><label for="rainbow_user_password"
                                                  class="col-lg-15 control-label">密 码</label></div>
            <div class="row row_pc_show row_min_width">
                <div class="col-lg-15">
                    <div class="row">
                        <div class="col-lg-15 password_pc_show"><input type="text" id="rainbow_user_password"
                                                                               autocomplete="false"
                                                                               class="form-control input_pc_show"
                                                                               placeholder="请输入密码"
                                                                               lang="{placeholder:enter_password}">
                        </div>
                        <!--<div class="col-lg-6 col-xs-6"><a href="javascript:void(0)"
                                                          class="btn btn-info pull-right btn-raised btn-sm btn_pc_show no_border_radius"
                                                          id="rainbow_get_user_password" lang="text:get_code">获取验证码</a>
                        </div>-->
                    </div>
                </div>
            </div>
            <div class="row"><span id="rainbow_password_error" class="rainbow_error_tips"></span></div>
            <div class="row row_min_width">
                <div class="col-lg-15 col-xs-15" style="padding-bottom: 19px"><a href="javascript:void(0)"
                                                                                 class="btn btn-info btn-raised log_btn_pc_show no_border_radius "
                                                                                 id="rainbow_loginBtn">登录</a><a
                        href="javascript:void(0)" class="btn btn-info btn-raised log_btn_pc_show no_border_radius "
                        id="rainbow_loginBtn_bak" style="display:none" disabled="disabled">登录</a></div>
            </div>
            <div class="row"><span id="rainbow_login_error" class="rainbow_error_tips"></span></div>
        </form>
    </div>
</div>
<script type="application/javascript">
    $(document).ready(function(){
        var $loginBtn = $('#rainbow_loginBtn');
        var $errorInfo = $('#error_line');

        $loginBtn.click(function(){
            var userName = $('#rainbow_user_name_number').val();
            var passWord = $('#rainbow_user_password').val();
            if(userName.length>0 && passWord.length>0){
                $.ajax({//ldap登录
                    type: 'GET',
//                    url: 'http://localhost:63342/rainbow-cms/test1.php?user='+userName+'&pwd='+passWord,
                    url: 'http://api.m.inhand.com.cn:5280/api/gateway/ldap?user='+userName+'&pwd='+passWord,
                    async: false,
                    dataType: "jsonp",
                    jsonp: "call_back",
                    call_back:"gateway_info_cb",
                    success: function(json){
                        if(json.result==1){//success
                            location.href='./success.html'
                        }else if(json.result==0){//false
                            $errorInfo.text("用户名密码错误");
                        }else if(json.error){
                            $errorInfo.text(json.error);
                        }

                    }
                });

            }else{
                $errorInfo.text("请输入用户名和密码");
            }
        });

    });
</script>
</body>
</html>
